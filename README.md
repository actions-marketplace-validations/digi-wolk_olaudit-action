<div align="center">

**Status of this repo**

[![License](https://img.shields.io/github/license/digi-wolk/olaudit-action?color=blue&label=License&style=flat-square)](https://github.com/digi-wolk/olaudit-action/blob/main/LICENSE.md)
[![Last commit](https://img.shields.io/github/last-commit/digi-wolk/olaudit-action.svg?color=blue&style=flat-square)](https://github.com/digi-wolk/olaudit-action/commits/main)
[![Contributors](https://img.shields.io/github/contributors/digi-wolk/olaudit-action?color=blue&style=flat-square)](https://github.com/digi-wolk/olaudit-action/graphs/contributors)


**Status of the main repo**

[![Test status](https://github.com/digi-wolk/oss-license-auditor/actions/workflows/run-tests.yml/badge.svg?branch=master)](https://github.com/digi-wolk/oss-license-auditor/actions/workflows/run-tests.yml)
[![Code quality status](https://github.com/digi-wolk/oss-license-auditor/actions/workflows/run-code-quality.yml/badge.svg?branch=master)](https://github.com/digi-wolk/oss-license-auditor/actions/workflows/run-code-quality.yml)
[![goSec security status](https://github.com/digi-wolk/oss-license-auditor/actions/workflows/run-security-checks.yml/badge.svg?branch=master)](https://github.com/digi-wolk/oss-license-auditor/actions/workflows/run-security-checks.yml)

[![License](https://img.shields.io/github/license/digi-wolk/oss-license-auditor?color=blue&label=License&style=flat-square)](https://github.com/digi-wolk/oss-license-auditor/blob/master/LICENSE.md)
[![Last commit](https://img.shields.io/github/last-commit/digi-wolk/oss-license-auditor.svg?color=blue&style=flat-square)](https://github.com/digi-wolk/oss-license-auditor/commits/master)
[![Contributors](https://img.shields.io/github/contributors/digi-wolk/oss-license-auditor?color=blue&style=flat-square)](https://github.com/digi-wolk/oss-license-auditor/graphs/contributors)

</div>

# About

Github Action for the [OSS license auditor](https://github.com/digi-wolk/oss-license-auditor) project (`olAudit`).

For documentations please refer to the main repository.

# Usage

Example (uses Github's default token, scoped to the repository that runs it)

```yaml
name: Audit licenses

on:
  pull_request:
    branches: [ master ] # Update to your branch name

jobs:
  audit-licenses:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: OSS License Auditor
        uses: digi-wolk/olaudit@v1
        with:
          path: .
```

In order to avoid facing GitHub API rate limits, we use Github Action's default token which is set as an environment
variable called `GITHUB_TOKEN`.
This token is automatically generated by GitHub and is scoped to the repository that is currently running the action.
You can override the value with a custom personal access token (PAT) if it needs to access private repositories.

Example with Personal Access Token (PAT):

```yaml
name: Audit licenses

on:
  pull_request:
    branches: [ master ] # Update to your branch name

jobs:
  audit-licenses:
    runs-on: ubuntu-latest
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_PAT }}
    steps:
      - uses: actions/checkout@v2
      - name: OSS License Auditor
        uses: digi-wolk/olaudit@v1
        with:
          path: .
```

You need to generate a Personal Access Token with necessary permissions and add it as a secret in your repository.
In this example we used `GITHUB_PAT` as the secret name.

# Inputs

| Name                 | Required | Default | Description                                                |
|----------------------|----------|---------|------------------------------------------------------------|
| path                 | yes      | .       | Path to the project root directory                         |
| only-risky           | no       | false   | Only show risky licenses                                   |
| fail-on-risky-fail   | no       | false   | Fail if risky licenses that are supposed to fail are found |
| comment-on-github-pr | no       | false   | Comment findings on the Pull Request on Github             |

